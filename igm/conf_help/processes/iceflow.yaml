method:
  Type: string
  Description: "Type of iceflow: it can be emulated (default), solved, or in diagnostic mode"
  Units: [dimensionless]
force_max_velbar:
  Type: float
  Description: "This permits to artificially upper-bound velocities, active if > 0"
  Units: m y^{-1}
physics:
  gravity_cst:
    Type: float
    Description: "Gravitational constant"
    Units: m^2 s^{-1}
  ice_density:
    Type: float
    Description: "Density of ice"
    Units: kg m^{-3}
  init_slidingco:
    Type: float
    Description: "Initial sliding coefficient slidingco"
    Units: Mpa y^m m^{-m}
  init_arrhenius:
    Type: float
    Description: "Initial arrhenius factor arrhenius"
    Units: Mpa^{-n} y^{-1}
  enhancement_factor:
    Type: float
    Description: "Enhancement factor multiplying the arrhenius factor"
    Units: [dimensionless]
  regu_glen:
    Type: float
    Description: "Regularization parameter for Glen's flow law"
    Units: [dimensionless]
  regu_weertman:
    Type: float
    Description: "Regularization parameter for Weertman's sliding law"
    Units: [dimensionless]
  exp_glen:
    Type: integer
    Description: "Glen's flow law exponent"
    Units: [dimensionless]
  exp_weertman:
    Type: integer
    Description: "Weertman's law exponent"
    Units: [dimensionless]
  new_friction_param:
    Type: boolean
    Description: "Sliding coefficient (this describes slidingco differently with slidingco**-(1.0 / exp_weertman) instead of slidingco as before)"
    Units: [dimensionless]
  dim_arrhenius:
    Type: integer
    Description: "Dimension of the arrhenius factor (horizontal 2D or 3D)"
    Units: [dimensionless]
  regu:
    Type: float
    Description: "This regularizes the energy forcing ice flow to be smooth in the horizontal direction"
    Units: [dimensionless]
  thr_ice_thk:
    Type: float
    Description: "Threshold Ice thickness for computing strain rate"
    Units: m
  min_sr:
    Type: float
    Description: "Minimum strain rate"
    Units: y^{-1}
  max_sr:
    Type: float
    Description: "Maximum strain rate"
    Units: y^{-1}
  force_negative_gravitational_energy:
    Type: boolean
    Description: "Force energy gravitational term to be negative"
    Units: [dimensionless]
  cf_eswn:
    Type: list
    Description: "This forces calving front at the border of the domain in the side given in the list"
    Units: [dimensionless]
  cf_cond:
    Type: boolean
    Description: "This forces calving front at the border of the domain in the side given in the list"
    Units: [dimensionless]
numerics:
  Nz:
    Type: integer
    Description: "Number of grid points for the vertical discretization"
    Units: [dimensionless]
  vert_spacing:
    Type: float
    Description: "Parameter controlling the discretization density to get more points near the bed than near the surface. 1.0 means equal vertical spacing."
    Units: [dimensionless]

solver:
  step_size:
    Type: float
    Description: "Step size for the optimizer used when solving Blatter-Pattyn in solver mode"
    Units: [dimensionless]
  solve_nbitmax:
    Type: integer
    Description: "Maximum number of iterations for the optimizer used when solving Blatter-Pattyn in solver mode"
    Units: [dimensionless]
  solve_stop_if_no_decrease:
    Type: boolean
    Description: "This permits to stop the solver if the energy does not decrease"
    Units: [dimensionless]
  optimizer:
    Type: string
    Description: "Type of Optimizer for the solver"
    Units: [dimensionless]
  lbfgs:
    Type: boolean
    Description: "Select the L-BFGS optimizer instead of the Adam optimizer"
    Units: [dimensionless]
  save_cost:
    Type: string
    Description: ""
    Units: [dimensionless]

emulator:
  fieldin:
    Type: list
    Description: "Input fields of the iceflow emulator"
    Units: [dimensionless]
  retrain_freq:
    Type: integer
    Description: "Frequency at which the emulator is retrained, 0 means never, 1 means at each time step, 2 means every two time steps, etc."
    Units: [dimensionless]
  retrain_lr:
    Type: float
    Description: "Learning rate for the retraining of the emulator"
    Units: [dimensionless]
  retrain_lr_init:
    Type: None
    Description: "Initial Learning rate for the retraining of the emulator"
    Units: [dimensionless]
  retrain_warm_up_it:
    Type: year
    Description: "Warm-up nb of iteration allowing intense initial training"
    Units: [dimensionless]
  retrain_emulator_nbit_init:
    Type: integer
    Description: "Number of iterations done at the first time step for the retraining of the emulator"
    Units: [dimensionless]
  retrain_emulator_nbit:
    Type: integer
    Description: "Number of iterations done at each time step for the retraining of the emulator"
    Units: [dimensionless]
  retrain_emulator_framesizemax:
    Type: integer
    Description: "Size of the patch used for retraining the emulator, this is useful for large size arrays, otherwise the GPU memory can be overloaded"
    Units: [dimensionless]
  pretrained:
    Type: boolean
    Description: "Do we take a pretrained emulator or start from scratch?"
    Units: [dimensionless]
  name:
    Type: file path
    Description: "Directory path of the deep-learning pretrained ice flow model, take from the library if empty string"
    Units: [dimensionless]
  save_model:
    Type: boolean
    Description: "Save the iceflow emulator at the end of the simulation"
    Units: [dimensionless]
  exclude_borders:
    Type: integer
    Description: "This is a quick fix of the border issue, otherwise the physics-informed emulator shows zero velocity at the border"
    Units: [dimensionless]
  optimizer:
    Type: string
    Description: "Type of Optimizer for the emulator"
    Units: [dimensionless]
  optimizer_clipnorm:
    Type: float
    Description: "If set, the gradient of each weight is individually clipped so that its norm is no higher than this value."
    Units: [dimensionless]
  optimizer_epsilon:
    Type: float
    Description: "A small constant for numerical stability for the Adam optimizer"
    Units: [dimensionless]
  save_cost:
    Type: string
    Description: ""
    Units: [dimensionless]
  output_directory:
    Type: file path
    Description: ""
    Units: [dimensionless]
  network:
    architecture:
      Type: string
      Description: "This is the type of network, it can be cnn or unet"
      Units: [dimensionless]
    multiple_window_size:
      Type: integer
      Description: "If a U-net, this forces window size to be a multiple of 2**N"
      Units: [dimensionless]
    activation:
      Type: string
      Description: "Activation function, it can be lrelu, relu, tanh, sigmoid, etc."
      Units: [dimensionless]
    nb_layers:
      Type: integer
      Description: "Number of layers in the CNN"
      Units: [dimensionless]
    nb_blocks:
      Type: integer
      Description: "Number of block layers in the U-net"
      Units: [dimensionless]
    nb_out_filter:
      Type: integer
      Description: "Number of output filters in the CNN"
      Units: [dimensionless]
    conv_ker_size:
      Type: integer
      Description: "Size of the convolution kernel"
      Units: [dimensionless]
    dropout_rate:
      Type: float
      Description: "Dropout rate in the CNN"
      Units: [dimensionless]
    weight_initialization:
      Type: string
      Description: "glorot_uniform, he_normal, lecun_normal"
      Units: [dimensionless]

